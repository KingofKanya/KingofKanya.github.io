<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>docker-compose部署若依springCloud | 红豆刨冰</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="若依官方文档–&gt; https:&#x2F;&#x2F;doc.ruoyi.vip&#x2F;ruoyi-cloud&#x2F;document&#x2F;hjbs.html#%E9%83%A8%E7%BD%B2%E7%B3%BB%E7%BB%9F 1.相关jar包准备mvn clean mvn package 打最新的jar包到target目录下 若依后台打包  将本地开发测试数据库的数据导出成sql脚本,放入sql这个文件夹  编写doc">
<meta property="og:type" content="article">
<meta property="og:title" content="docker-compose部署若依springCloud">
<meta property="og:url" content="http://example.com/2024/08/27/docker-compose%E9%83%A8%E7%BD%B2%E8%8B%A5%E4%BE%9DspringCloud/index.html">
<meta property="og:site_name" content="红豆刨冰">
<meta property="og:description" content="若依官方文档–&gt; https:&#x2F;&#x2F;doc.ruoyi.vip&#x2F;ruoyi-cloud&#x2F;document&#x2F;hjbs.html#%E9%83%A8%E7%BD%B2%E7%B3%BB%E7%BB%9F 1.相关jar包准备mvn clean mvn package 打最新的jar包到target目录下 若依后台打包  将本地开发测试数据库的数据导出成sql脚本,放入sql这个文件夹  编写doc">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/KingofKanya/online-picture/master/blog/image-20240827114809409.png">
<meta property="og:image" content="https://raw.githubusercontent.com/KingofKanya/online-picture/master/blog/image-20240827114106220.png">
<meta property="og:image" content="https://raw.githubusercontent.com/KingofKanya/online-picture/master/blog/image-20240827114343122.png">
<meta property="og:image" content="https://raw.githubusercontent.com/KingofKanya/online-picture/master/blog/image-20240827114401681.png">
<meta property="og:image" content="https://raw.githubusercontent.com/KingofKanya/online-picture/master/blog/image-20240827132552431.png">
<meta property="article:published_time" content="2024-08-27T02:52:24.399Z">
<meta property="article:modified_time" content="2024-08-27T13:51:12.716Z">
<meta property="article:author" content="红豆刨冰">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/KingofKanya/online-picture/master/blog/image-20240827114809409.png">
  
    <link rel="alternate" href="/atom.xml" title="红豆刨冰" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">红豆刨冰</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-docker-compose部署若依springCloud" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/08/27/docker-compose%E9%83%A8%E7%BD%B2%E8%8B%A5%E4%BE%9DspringCloud/" class="article-date">
  <time class="dt-published" datetime="2024-08-27T02:52:24.399Z" itemprop="datePublished">2024-08-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      docker-compose部署若依springCloud
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>若依官方文档–&gt; <a target="_blank" rel="noopener" href="https://doc.ruoyi.vip/ruoyi-cloud/document/hjbs.html#%E9%83%A8%E7%BD%B2%E7%B3%BB%E7%BB%9F">https://doc.ruoyi.vip/ruoyi-cloud/document/hjbs.html#%E9%83%A8%E7%BD%B2%E7%B3%BB%E7%BB%9F</a></p>
<h1 id="1-相关jar包准备"><a href="#1-相关jar包准备" class="headerlink" title="1.相关jar包准备"></a>1.相关jar包准备</h1><p>mvn clean</p>
<p>mvn package</p>
<p>打最新的jar包到target目录下</p>
<p>若依后台打包</p>
<p><img src="https://raw.githubusercontent.com/KingofKanya/online-picture/master/blog/image-20240827114809409.png" alt="image-20240827114809409"></p>
<p>将本地开发测试数据库的数据导出成sql脚本,放入sql这个文件夹</p>
<p><img src="https://raw.githubusercontent.com/KingofKanya/online-picture/master/blog/image-20240827114106220.png" alt="image-20240827114106220"></p>
<p>编写docker下copy.sh文件</p>
<p><img src="https://raw.githubusercontent.com/KingofKanya/online-picture/master/blog/image-20240827114343122.png" alt="image-20240827114343122"></p>
<p>执行脚本,相应文件已经拷贝到docker目录下</p>
<p><img src="https://raw.githubusercontent.com/KingofKanya/online-picture/master/blog/image-20240827114401681.png" alt="image-20240827114401681"></p>
<h1 id="2-修改相关配置文件"><a href="#2-修改相关配置文件" class="headerlink" title="2.修改相关配置文件"></a>2.修改相关配置文件</h1><h2 id="2-1-mysql"><a href="#2-1-mysql" class="headerlink" title="2.1 mysql"></a>2.1 mysql</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> mysql:<span class="number">5.7</span></span><br><span class="line"><span class="comment"># author</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> ruoyi</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行sql脚本</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> ./db/*.sql /docker-entrypoint-initdb.d/</span></span><br></pre></td></tr></table></figure>

<p>在使用 mysql:5.7 作为基础镜像时，MySQL 官方镜像提供了一个特性，即在容器启动时会自动执行 &#x2F;docker-entrypoint-initdb.d&#x2F; 目录下的所有 .sql 文件。也就是说，当启动基于这个镜像的容器时，MySQL 会自动运行这些 SQL 脚本来初始化数据库。</p>
<h2 id="2-2-nacos"><a href="#2-2-nacos" class="headerlink" title="2.2 nacos"></a>2.2 nacos</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> nacos/nacos-server</span><br><span class="line"><span class="comment"># author</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> ruoyi</span><br><span class="line"></span><br><span class="line"><span class="comment"># 复制conf文件到路径</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./conf/application.properties /home/nacos/conf/application.properties</span></span><br></pre></td></tr></table></figure>

<h2 id="2-3-nginx"><a href="#2-3-nginx" class="headerlink" title="2.3 nginx"></a>2.3 nginx</h2><p>nginx.conf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    sendfile        on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   /home/ruoyi/projects/ruoyi-ui;</span><br><span class="line">            try_files $uri $uri/ /index.html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location /prod-api/&#123;</span><br><span class="line">            proxy_set_header Host $http_host;</span><br><span class="line">            proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">            proxy_set_header REMOTE-HOST $remote_addr;</span><br><span class="line">            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">            proxy_pass http://ruoyi-gateway:8080/;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        # 避免actuator暴露</span><br><span class="line">        if ($request_uri ~ &quot;/actuator&quot;) &#123;</span><br><span class="line">            return 403;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将所有发往 &#x2F;prod-api&#x2F; 的请求代理转发到 ruoyi-gateway 服务器，同时保留和传递原始请求的相关头信息</p>
<h2 id="2-4-redis"><a href="#2-4-redis" class="headerlink" title="2.4 redis"></a>2.4 redis</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> redis</span><br><span class="line"><span class="comment"># author</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> ruoyi</span><br><span class="line"></span><br><span class="line"><span class="comment"># 挂载目录</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="language-bash"> /home/ruoyi/redis</span></span><br><span class="line"><span class="comment"># 创建目录</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /home/ruoyi/redis</span></span><br><span class="line"><span class="comment"># 指定路径</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /home/ruoyi/redis</span></span><br><span class="line"><span class="comment"># 复制conf文件到路径</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./conf/redis.conf /home/ruoyi/redis/redis.conf</span></span><br></pre></td></tr></table></figure>

<h2 id="2-5-ruoyi"><a href="#2-5-ruoyi" class="headerlink" title="2.5 ruoyi"></a>2.5 ruoyi</h2><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> docker.m.daocloud.io/library/eclipse-temurin:<span class="number">17</span>-jre</span><br><span class="line"><span class="comment"># author</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> ruoyi</span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义 JAR 包文件名</span></span><br><span class="line"><span class="keyword">ENV</span> JAR_FILE=ruoyi-modules-midjourney-proxy-<span class="number">3.6</span>.<span class="number">3</span>.jar</span><br><span class="line"></span><br><span class="line"><span class="comment"># 挂载目录</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="language-bash"> /home/ruoyi</span></span><br><span class="line"><span class="comment"># 创建目录</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">mkdir</span> -p /home/ruoyi</span></span><br><span class="line"><span class="comment"># 指定路径</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /home/ruoyi</span></span><br><span class="line"><span class="comment"># 复制 jar 文件到路径</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./jar/<span class="variable">$&#123;JAR_FILE&#125;</span> /home/ruoyi/<span class="variable">$&#123;JAR_FILE&#125;</span></span></span><br><span class="line"><span class="comment"># 启动系统服务</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="string">&quot;java&quot;</span>,<span class="string">&quot;-jar&quot;</span>,<span class="string">&quot;<span class="variable">$&#123;JAR_FILE&#125;</span>&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<p>ruoyi文件下的其他dockerfile书写类似</p>
<h2 id="2-6-docker-compose-yml"><a href="#2-6-docker-compose-yml" class="headerlink" title="2.6 docker-compose.yml"></a>2.6 docker-compose.yml</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version :</span> <span class="string">&#x27;3.8&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">ruoyi-nacos:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">ruoyi-nacos</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nacos/nacos-server</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./nacos</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">MODE=standalone</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./nacos/logs/:/home/nacos/logs</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./nacos/conf/application.properties:/home/nacos/conf/application.properties</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8850:8848&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ruoyi-mysql</span></span><br><span class="line">  <span class="attr">ruoyi-mysql:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">ruoyi-mysql</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:5.7</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./mysql</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;3307:3306&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./mysql/conf:/etc/mysql/conf.d</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./mysql/logs:/logs</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./mysql/data:/var/lib/mysql</span></span><br><span class="line">    <span class="attr">command:</span> [</span><br><span class="line">          <span class="string">&#x27;mysqld&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;--innodb-buffer-pool-size=80M&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;--character-set-server=utf8mb4&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;--collation-server=utf8mb4_unicode_ci&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;--default-time-zone=+8:00&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;--lower-case-table-names=1&#x27;</span></span><br><span class="line">        ]</span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_DATABASE:</span> <span class="string">&#x27;ry-cloud&#x27;</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">password</span></span><br><span class="line">  <span class="attr">ruoyi-redis:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">ruoyi-redis</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">redis</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./redis</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;6380:6379&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./redis/conf/redis.conf:/home/ruoyi/redis/redis.conf</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./redis/data:/data</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">redis-server</span> <span class="string">/home/ruoyi/redis/redis.conf</span></span><br><span class="line">  <span class="attr">ruoyi-nginx:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">ruoyi-nginx</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nginx</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./nginx</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;81:80&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./nginx/html/dist:/home/ruoyi/projects/ruoyi-ui</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./nginx/conf/nginx.conf:/etc/nginx/nginx.conf</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./nginx/logs:/var/log/nginx</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./nginx/conf.d:/etc/nginx/conf.d</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ruoyi-gateway</span></span><br><span class="line">    <span class="attr">links:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ruoyi-gateway</span></span><br><span class="line">  <span class="attr">ruoyi-gateway:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">ruoyi-gateway</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./ruoyi/gateway</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">dockerfile</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8081:8080&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ruoyi-redis</span></span><br><span class="line">    <span class="attr">links:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ruoyi-redis</span></span><br><span class="line">  <span class="attr">ruoyi-auth:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">ruoyi-auth</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./ruoyi/auth</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">dockerfile</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;9210:9200&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ruoyi-redis</span></span><br><span class="line">    <span class="attr">links:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ruoyi-redis</span></span><br><span class="line">  <span class="attr">ruoyi-modules-system:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">ruoyi-modules-system</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./ruoyi/modules/system</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">dockerfile</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;9201:9201&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ruoyi-redis</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ruoyi-mysql</span></span><br><span class="line">    <span class="attr">links:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ruoyi-redis</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ruoyi-mysql</span></span><br><span class="line">  <span class="attr">ruoyi-modules-midjourney-proxy:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">ruoyi-modules-midjourney-proxy</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">./ruoyi/modules/midjourney</span></span><br><span class="line">      <span class="attr">dockerfile:</span> <span class="string">dockerfile</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;10086:10086&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ruoyi-redis</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ruoyi-mysql</span></span><br><span class="line">    <span class="attr">links:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ruoyi-redis</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ruoyi-mysql</span></span><br></pre></td></tr></table></figure>

<p>配置容器名称,构建方法,端口,依赖管理</p>
<h1 id="3-运行部署"><a href="#3-运行部署" class="headerlink" title="3.运行部署"></a>3.运行部署</h1><p>在开始之前，请确保你的系统上已经安装了 Docker 和 Docker Compose。如果还没有安装，可以根据你的操作系统类型进行安装。</p>
<p>​	•	Docker 安装：<a target="_blank" rel="noopener" href="https://docs.docker.com/get-docker/">Docker 官方安装指南</a></p>
<p>​	•	Docker Compose 安装：<a target="_blank" rel="noopener" href="https://docs.docker.com/compose/install/">Docker Compose 安装指南</a></p>
<p>使用 cd 命令导航到包含 docker-compose.yml 文件的目录</p>
<p>运行以下命令启动 docker-compose.yml 文件中定义的所有服务：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up</span><br></pre></td></tr></table></figure>

<p>如果你希望在后台运行这些服务（即以“守护进程”模式运行），可以使用 -d 选项</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure>



<p>直接将整个docker文件夹上传,然后运行</p>
<p><img src="https://raw.githubusercontent.com/KingofKanya/online-picture/master/blog/image-20240827132552431.png" alt="image-20240827132552431"></p>
<p>有时候nacos的构建会报错,因为mysql没有初始化完成,nacos就开始读ry-config表</p>
<p>最后再测试即可</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/08/27/docker-compose%E9%83%A8%E7%BD%B2%E8%8B%A5%E4%BE%9DspringCloud/" data-id="cm0chknd70001pos8h65505hl" data-title="docker-compose部署若依springCloud" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2024/08/13/%E8%8B%A5%E4%BE%9D%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E6%95%99%E7%A8%8B%E5%8F%8A%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81%E8%AF%A6%E8%A7%A3/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">若依代码生成教程及生成代码详解</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">August 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/08/27/docker-compose%E9%83%A8%E7%BD%B2%E8%8B%A5%E4%BE%9DspringCloud/">docker-compose部署若依springCloud</a>
          </li>
        
          <li>
            <a href="/2024/08/13/%E8%8B%A5%E4%BE%9D%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E6%95%99%E7%A8%8B%E5%8F%8A%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81%E8%AF%A6%E8%A7%A3/">若依代码生成教程及生成代码详解</a>
          </li>
        
          <li>
            <a href="/2024/07/26/hexo%E5%8D%9A%E5%AE%A2%E5%9F%9F%E5%90%8D%E9%85%8D%E7%BD%AE/">hexo博客域名配置</a>
          </li>
        
          <li>
            <a href="/2024/07/21/Spring%E6%B3%A8%E5%85%A5bean%E5%8F%91%E7%8E%B0%E5%A4%9A%E4%B8%AA%E5%80%99%E9%80%89bean%E9%94%99%E8%AF%AF/">Spring注入bean发现多个候选bean错误</a>
          </li>
        
          <li>
            <a href="/2024/07/17/hexo%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2&github%20pages%E9%83%A8%E7%BD%B2&picgo+typora%E5%9B%BE%E5%BA%8A/">hexo搭建博客&amp;github pages部署&amp;picgo+typora图床</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 红豆刨冰<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>